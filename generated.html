<!DOCTYPE html>
<html>
<head>
  <meta charset='utf-8'>
  <meta http-equiv="X-UA-Compatible" content="chrome=1">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!--link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css"-->
  <link rel="stylesheet" href="/gfx/bootstrap.min.css">
  <link rel="stylesheet" href="/gfx/main.css">
  <link rel="stylesheet" href="/gfx/code.css">
  <title>Generated code</title>
</head>
<body class="page">
<!-- Google Tag Manager -->
<noscript><iframe src="//www.googletagmanager.com/ns.html?id=GTM-PMJSKV"
height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'//www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-PMJSKV');</script>
<!-- End Google Tag Manager -->

<header>
  <div class="container">
    <a href="/">Immutables</a> &larr;

    <h1>Generated code <iframe src="https://ghbtns.com/github-btn.html?user=immutables&repo=immutables&type=star&count=true&size=large" frameborder="0" scrolling="0" width="160px" height="30px"></iframe>
</h1>
  </div>
</header>
<aside id="toc"></aside>
<section class="documentation">
  <p>Here&#39;s an illustration of the kind of code is generated by annotation processor.</p>

<p>Let&#39;s start with minimal example. In the first example builder and copy methods are suppressed,
and there are no Guava or JSR-305 annotations libraries in the classpath.
<code>@Parameter</code> annotation is used to specify constructor parameters so that <a href="/immutable.html#constructor">constructor method</a> is generated.</p>

<h3>Minimal tuple</h3>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">org.immutables.value.Value</span><span class="o">;</span>

<span class="nd">@Value.Immutable</span><span class="o">(</span><span class="n">builder</span> <span class="o">=</span> <span class="kc">false</span><span class="o">,</span> <span class="n">copy</span> <span class="o">=</span> <span class="kc">false</span><span class="o">)</span>
<span class="kd">interface</span> <span class="nc">Tuple</span> <span class="o">{</span>
  <span class="nd">@Value.Parameter</span> <span class="kt">int</span> <span class="nf">getIndex</span><span class="o">();</span>
  <span class="nd">@Value.Parameter</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div>
<p>The source code of the generated immutable implementation:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">java.util.Objects</span><span class="o">;</span>

<span class="cm">/**</span>
<span class="cm"> * Immutable implementation of {@link Tuple}.</span>
<span class="cm"> * &lt;p&gt;</span>
<span class="cm"> * Use the static factory method to create immutable instances:</span>
<span class="cm"> * {@code ImmutableTuple.of()}.</span>
<span class="cm"> */</span>
<span class="nd">@SuppressWarnings</span><span class="o">(</span><span class="s">&quot;all&quot;</span><span class="o">)</span>
<span class="nd">@Immutable</span>
<span class="kd">final</span> <span class="kd">class</span> <span class="nc">ImmutableTuple</span> <span class="kd">implements</span> <span class="n">Tuple</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">int</span> <span class="n">index</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>

  <span class="kd">private</span> <span class="nf">ImmutableTuple</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">,</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">index</span> <span class="o">=</span> <span class="n">index</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">Objects</span><span class="o">.</span><span class="na">requireNonNull</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="s">&quot;name&quot;</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * @return The value of the {@code index} attribute</span>
<span class="cm">   */</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">getIndex</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">index</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * @return The value of the {@code name} attribute</span>
<span class="cm">   */</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">getName</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * This instance is equal to all instances of {@code ImmutableTuple} that have equal attribute values.</span>
<span class="cm">   * @return {@code true} if {@code this} is equal to {@code another} instance</span>
<span class="cm">   */</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="n">Object</span> <span class="n">another</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">this</span> <span class="o">==</span> <span class="n">another</span><span class="o">)</span> <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">another</span> <span class="k">instanceof</span> <span class="n">ImmutableTuple</span>
        <span class="o">&amp;&amp;</span> <span class="n">equalTo</span><span class="o">((</span><span class="n">ImmutableTuple</span><span class="o">)</span> <span class="n">another</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kt">boolean</span> <span class="nf">equalTo</span><span class="o">(</span><span class="n">ImmutableTuple</span> <span class="n">another</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">index</span> <span class="o">==</span> <span class="n">another</span><span class="o">.</span><span class="na">index</span>
        <span class="o">&amp;&amp;</span> <span class="n">name</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">another</span><span class="o">.</span><span class="na">name</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Computes a hash code from attributes: {@code index}, {@code name}.</span>
<span class="cm">   * @return hashCode value</span>
<span class="cm">   */</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">hashCode</span><span class="o">()</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">h</span> <span class="o">=</span> <span class="mi">31</span><span class="o">;</span>
    <span class="n">h</span> <span class="o">=</span> <span class="n">h</span> <span class="o">*</span> <span class="mi">17</span> <span class="o">+</span> <span class="n">index</span><span class="o">;</span>
    <span class="n">h</span> <span class="o">=</span> <span class="n">h</span> <span class="o">*</span> <span class="mi">17</span> <span class="o">+</span> <span class="n">name</span><span class="o">.</span><span class="na">hashCode</span><span class="o">();</span>
    <span class="k">return</span> <span class="n">h</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Prints the immutable value {@code Tuple...} with all non-generated</span>
<span class="cm">   * and non-auxiliary attribute values.</span>
<span class="cm">   * @return A string representation of the value</span>
<span class="cm">   */</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="s">&quot;Tuple{&quot;</span>
        <span class="o">+</span> <span class="s">&quot;index=&quot;</span> <span class="o">+</span> <span class="n">index</span>
        <span class="o">+</span> <span class="s">&quot;, name=&quot;</span> <span class="o">+</span> <span class="n">name</span>
        <span class="o">+</span> <span class="s">&quot;}&quot;</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Construct a new immutable {@code Tuple} instance.</span>
<span class="cm">   * @param index The value for the {@code index} attribute</span>
<span class="cm">   * @param name The value for the {@code name} attribute</span>
<span class="cm">   * @return An immutable Tuple instance</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">ImmutableTuple</span> <span class="nf">of</span><span class="o">(</span><span class="kt">int</span> <span class="n">index</span><span class="o">,</span> <span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">ImmutableTuple</span><span class="o">(</span><span class="n">index</span><span class="o">,</span> <span class="n">name</span><span class="o">);</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
<p>By default, extra code is generated. These extras can be disabled.
See the <a href="/style.html">Style guide</a> for examples of how this can be configured on package or using meta-annotations.</p>

<h3>Typical value object</h3>

<p>Here&#39;s a more typical example of a value object with a builder and copy methods. Google Guava is present in classpath.</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">com.google.common.base.Optional</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">org.immutables.value.Value</span><span class="o">;</span>

<span class="nd">@Value.Immutable</span>
<span class="kd">interface</span> <span class="nc">ValueObject</span> <span class="o">{</span>
  <span class="kt">long</span> <span class="nf">id</span><span class="o">();</span>
  <span class="n">String</span> <span class="nf">name</span><span class="o">();</span>
  <span class="n">List</span><span class="o">&lt;</span><span class="n">Number</span><span class="o">&gt;</span> <span class="nf">numbers</span><span class="o">();</span>
  <span class="n">Optional</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">comment</span><span class="o">();</span>
  <span class="kt">long</span><span class="o">[]</span> <span class="nf">data</span><span class="o">();</span>
<span class="o">}</span>
</code></pre></div>
<p>You will probably agree that the code below would have been painful to write by hand:</p>
<div class="highlight"><pre><code class="language-java" data-lang="java"><span></span><span class="kn">import</span> <span class="nn">com.google.common.base.MoreObjects</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.google.common.base.Optional</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.google.common.base.Preconditions</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.google.common.collect.ImmutableList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.google.common.collect.Lists</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.google.common.primitives.Longs</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.Arrays</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.annotation.Generated</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.annotation.Nullable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.annotation.ParametersAreNonnullByDefault</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.annotation.concurrent.Immutable</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">javax.annotation.concurrent.NotThreadSafe</span><span class="o">;</span>

<span class="cm">/**</span>
<span class="cm"> * Immutable implementation of {@link ValueObject}.</span>
<span class="cm"> * &lt;p&gt;</span>
<span class="cm"> * Use the builder to create immutable instances:</span>
<span class="cm"> * {@code ImmutableValueObject.builder()}.</span>
<span class="cm"> */</span>
<span class="nd">@SuppressWarnings</span><span class="o">(</span><span class="s">&quot;all&quot;</span><span class="o">)</span>
<span class="nd">@ParametersAreNonnullByDefault</span>
<span class="nd">@Generated</span><span class="o">({</span><span class="s">&quot;Immutables.generator&quot;</span><span class="o">,</span> <span class="s">&quot;ValueObject&quot;</span><span class="o">})</span>
<span class="nd">@Immutable</span>
<span class="kd">final</span> <span class="kd">class</span> <span class="nc">ImmutableValueObject</span> <span class="kd">implements</span> <span class="n">ValueObject</span> <span class="o">{</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">id</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">ImmutableList</span><span class="o">&lt;</span><span class="n">Number</span><span class="o">&gt;</span> <span class="n">numbers</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">comment</span><span class="o">;</span>
  <span class="kd">private</span> <span class="kd">final</span> <span class="kt">long</span><span class="o">[]</span> <span class="n">data</span><span class="o">;</span>

  <span class="kd">private</span> <span class="nf">ImmutableValueObject</span><span class="o">(</span>
      <span class="kt">long</span> <span class="n">id</span><span class="o">,</span>
      <span class="n">String</span> <span class="n">name</span><span class="o">,</span>
      <span class="n">ImmutableList</span><span class="o">&lt;</span><span class="n">Number</span><span class="o">&gt;</span> <span class="n">numbers</span><span class="o">,</span>
      <span class="n">Optional</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">comment</span><span class="o">,</span>
      <span class="kt">long</span><span class="o">[]</span> <span class="n">data</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">name</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">numbers</span> <span class="o">=</span> <span class="n">numbers</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">comment</span> <span class="o">=</span> <span class="n">comment</span><span class="o">;</span>
    <span class="k">this</span><span class="o">.</span><span class="na">data</span> <span class="o">=</span> <span class="n">data</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * @return The value of the {@code id} attribute</span>
<span class="cm">   */</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">long</span> <span class="nf">id</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">id</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * @return The value of the {@code name} attribute</span>
<span class="cm">   */</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">name</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">name</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * @return The value of the {@code numbers} attribute</span>
<span class="cm">   */</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">ImmutableList</span><span class="o">&lt;</span><span class="n">Number</span><span class="o">&gt;</span> <span class="nf">numbers</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">numbers</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * @return The value of the {@code comment} attribute</span>
<span class="cm">   */</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="nf">comment</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">comment</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * @return A cloned {@code data} array</span>
<span class="cm">   */</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">long</span><span class="o">[]</span> <span class="nf">data</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">data</span><span class="o">.</span><span class="na">clone</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Copy the current immutable object by setting a value for the {@link ValueObject#id() id} attribute.</span>
<span class="cm">   * A value equality check is used to prevent copying of the same value by returning {@code this}.</span>
<span class="cm">   * @param value A new value for id</span>
<span class="cm">   * @return A modified copy of the {@code this} object</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="n">ImmutableValueObject</span> <span class="nf">withId</span><span class="o">(</span><span class="kt">long</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">==</span> <span class="n">value</span><span class="o">)</span> <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">ImmutableValueObject</span><span class="o">(</span><span class="n">value</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">numbers</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">comment</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">data</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Copy the current immutable object by setting a value for the {@link ValueObject#name() name} attribute.</span>
<span class="cm">   * An equals check used to prevent copying of the same value by returning {@code this}.</span>
<span class="cm">   * @param value A new value for name</span>
<span class="cm">   * @return A modified copy of the {@code this} object</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="n">ImmutableValueObject</span> <span class="nf">withName</span><span class="o">(</span><span class="n">String</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">value</span><span class="o">))</span> <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">ImmutableValueObject</span><span class="o">(</span>
        <span class="k">this</span><span class="o">.</span><span class="na">id</span><span class="o">,</span>
        <span class="n">Preconditions</span><span class="o">.</span><span class="na">checkNotNull</span><span class="o">(</span><span class="n">value</span><span class="o">,</span> <span class="s">&quot;name&quot;</span><span class="o">),</span>
        <span class="k">this</span><span class="o">.</span><span class="na">numbers</span><span class="o">,</span>
        <span class="k">this</span><span class="o">.</span><span class="na">comment</span><span class="o">,</span>
        <span class="k">this</span><span class="o">.</span><span class="na">data</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Copy the current immutable object with elements that replace the content of {@link ValueObject#numbers() numbers}.</span>
<span class="cm">   * @param elements The elements to set</span>
<span class="cm">   * @return A modified copy of {@code this} object</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="n">ImmutableValueObject</span> <span class="nf">withNumbers</span><span class="o">(</span><span class="n">Number</span><span class="o">...</span> <span class="n">elements</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">ImmutableList</span><span class="o">&lt;</span><span class="n">Number</span><span class="o">&gt;</span> <span class="n">newValue</span> <span class="o">=</span> <span class="n">ImmutableList</span><span class="o">.</span><span class="na">copyOf</span><span class="o">(</span><span class="n">elements</span><span class="o">);</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">ImmutableValueObject</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">id</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">,</span> <span class="n">newValue</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">comment</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">data</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Copy the current immutable object with elements that replace the content of {@link ValueObject#numbers() numbers}.</span>
<span class="cm">   * A shallow reference equality check is used to prevent copying of the same value by returning {@code this}.</span>
<span class="cm">   * @param elements An iterable of numbers elements to set</span>
<span class="cm">   * @return A modified copy of {@code this} object</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="n">ImmutableValueObject</span> <span class="nf">withNumbers</span><span class="o">(</span><span class="n">Iterable</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">Number</span><span class="o">&gt;</span> <span class="n">elements</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">numbers</span> <span class="o">==</span> <span class="n">elements</span><span class="o">)</span> <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="n">ImmutableList</span><span class="o">&lt;</span><span class="n">Number</span><span class="o">&gt;</span> <span class="n">newValue</span> <span class="o">=</span> <span class="n">ImmutableList</span><span class="o">.</span><span class="na">copyOf</span><span class="o">(</span><span class="n">elements</span><span class="o">);</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">ImmutableValueObject</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">id</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">,</span> <span class="n">newValue</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">comment</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">data</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Copy the current immutable object by setting a &lt;i&gt;present&lt;/i&gt; value for the optional {@link ValueObject#comment() comment} attribute.</span>
<span class="cm">   * @param value The value for comment</span>
<span class="cm">   * @return A modified copy of {@code this} object</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="n">ImmutableValueObject</span> <span class="nf">withComment</span><span class="o">(</span><span class="n">String</span> <span class="n">value</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Optional</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">newValue</span> <span class="o">=</span> <span class="n">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">value</span><span class="o">);</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">ImmutableValueObject</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">id</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">numbers</span><span class="o">,</span> <span class="n">newValue</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">data</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Copy the current immutable object by setting an optional value for the {@link ValueObject#comment() comment} attribute.</span>
<span class="cm">   * A shallow reference equality check on the optional value is used to prevent copying of the same value by returning {@code this}.</span>
<span class="cm">   * @param optional A value for comment</span>
<span class="cm">   * @return A modified copy of {@code this} object</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="n">ImmutableValueObject</span> <span class="nf">withComment</span><span class="o">(</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">optional</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">Optional</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">value</span> <span class="o">=</span> <span class="n">Preconditions</span><span class="o">.</span><span class="na">checkNotNull</span><span class="o">(</span><span class="n">optional</span><span class="o">,</span> <span class="s">&quot;comment&quot;</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">comment</span> <span class="o">==</span> <span class="n">value</span><span class="o">)</span> <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">ImmutableValueObject</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">id</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">numbers</span><span class="o">,</span> <span class="n">value</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">data</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Copy the current immutable object with elements that replace the content of {@link ValueObject#data() data}.</span>
<span class="cm">   * The array is cloned before being saved as attribute values.</span>
<span class="cm">   * @param elements The non-null elements for data</span>
<span class="cm">   * @return A modified copy of {@code this} object</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="kd">final</span> <span class="n">ImmutableValueObject</span> <span class="nf">withData</span><span class="o">(</span><span class="kt">long</span><span class="o">...</span> <span class="n">elements</span><span class="o">)</span> <span class="o">{</span>
    <span class="kt">long</span><span class="o">[]</span> <span class="n">newValue</span> <span class="o">=</span> <span class="n">elements</span><span class="o">.</span><span class="na">clone</span><span class="o">();</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">ImmutableValueObject</span><span class="o">(</span><span class="k">this</span><span class="o">.</span><span class="na">id</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">name</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">numbers</span><span class="o">,</span> <span class="k">this</span><span class="o">.</span><span class="na">comment</span><span class="o">,</span> <span class="n">newValue</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * This instance is equal to all instances of {@code ImmutableValueObject} that have equal attribute values.</span>
<span class="cm">   * @return {@code true} if {@code this} is equal to {@code another} instance</span>
<span class="cm">   */</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">boolean</span> <span class="nf">equals</span><span class="o">(</span><span class="nd">@Nullable</span> <span class="n">Object</span> <span class="n">another</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="k">this</span> <span class="o">==</span> <span class="n">another</span><span class="o">)</span> <span class="k">return</span> <span class="kc">true</span><span class="o">;</span>
    <span class="k">return</span> <span class="n">another</span> <span class="k">instanceof</span> <span class="n">ImmutableValueObject</span>
        <span class="o">&amp;&amp;</span> <span class="n">equalTo</span><span class="o">((</span><span class="n">ImmutableValueObject</span><span class="o">)</span> <span class="n">another</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="kd">private</span> <span class="kt">boolean</span> <span class="nf">equalTo</span><span class="o">(</span><span class="n">ImmutableValueObject</span> <span class="n">another</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">id</span> <span class="o">==</span> <span class="n">another</span><span class="o">.</span><span class="na">id</span>
        <span class="o">&amp;&amp;</span> <span class="n">name</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">another</span><span class="o">.</span><span class="na">name</span><span class="o">)</span>
        <span class="o">&amp;&amp;</span> <span class="n">numbers</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">another</span><span class="o">.</span><span class="na">numbers</span><span class="o">)</span>
        <span class="o">&amp;&amp;</span> <span class="n">comment</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">another</span><span class="o">.</span><span class="na">comment</span><span class="o">)</span>
        <span class="o">&amp;&amp;</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">equals</span><span class="o">(</span><span class="n">data</span><span class="o">,</span> <span class="n">another</span><span class="o">.</span><span class="na">data</span><span class="o">);</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Computes a hash code from attributes: {@code id}, {@code name}, {@code numbers}, {@code comment}, {@code data}.</span>
<span class="cm">   * @return hashCode value</span>
<span class="cm">   */</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="kt">int</span> <span class="nf">hashCode</span><span class="o">()</span> <span class="o">{</span>
    <span class="kt">int</span> <span class="n">h</span> <span class="o">=</span> <span class="mi">31</span><span class="o">;</span>
    <span class="n">h</span> <span class="o">=</span> <span class="n">h</span> <span class="o">*</span> <span class="mi">17</span> <span class="o">+</span> <span class="n">Longs</span><span class="o">.</span><span class="na">hashCode</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
    <span class="n">h</span> <span class="o">=</span> <span class="n">h</span> <span class="o">*</span> <span class="mi">17</span> <span class="o">+</span> <span class="n">name</span><span class="o">.</span><span class="na">hashCode</span><span class="o">();</span>
    <span class="n">h</span> <span class="o">=</span> <span class="n">h</span> <span class="o">*</span> <span class="mi">17</span> <span class="o">+</span> <span class="n">numbers</span><span class="o">.</span><span class="na">hashCode</span><span class="o">();</span>
    <span class="n">h</span> <span class="o">=</span> <span class="n">h</span> <span class="o">*</span> <span class="mi">17</span> <span class="o">+</span> <span class="n">comment</span><span class="o">.</span><span class="na">hashCode</span><span class="o">();</span>
    <span class="n">h</span> <span class="o">=</span> <span class="n">h</span> <span class="o">*</span> <span class="mi">17</span> <span class="o">+</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">hashCode</span><span class="o">(</span><span class="n">data</span><span class="o">);</span>
    <span class="k">return</span> <span class="n">h</span><span class="o">;</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Prints the immutable value {@code ValueObject...} with all non-generated</span>
<span class="cm">   * and non-auxiliary attribute values.</span>
<span class="cm">   * @return A string representation of the value</span>
<span class="cm">   */</span>
  <span class="nd">@Override</span>
  <span class="kd">public</span> <span class="n">String</span> <span class="nf">toString</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="n">MoreObjects</span><span class="o">.</span><span class="na">toStringHelper</span><span class="o">(</span><span class="s">&quot;ValueObject&quot;</span><span class="o">)</span>
        <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;id&quot;</span><span class="o">,</span> <span class="n">id</span><span class="o">)</span>
        <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">,</span> <span class="n">name</span><span class="o">)</span>
        <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;numbers&quot;</span><span class="o">,</span> <span class="n">numbers</span><span class="o">)</span>
        <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;comment&quot;</span><span class="o">,</span> <span class="n">comment</span><span class="o">)</span>
        <span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;data&quot;</span><span class="o">,</span> <span class="n">Arrays</span><span class="o">.</span><span class="na">toString</span><span class="o">(</span><span class="n">data</span><span class="o">))</span>
        <span class="o">.</span><span class="na">toString</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Creates an immutable copy of a {@link ValueObject} value.</span>
<span class="cm">   * Uses accessors to get values to initialize the new immutable instance.</span>
<span class="cm">   * If an instance is already immutable, it is returned as is.</span>
<span class="cm">   * @param instance The instance to copy</span>
<span class="cm">   * @return A copied immutable ValueObject instance</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">ImmutableValueObject</span> <span class="nf">copyOf</span><span class="o">(</span><span class="n">ValueObject</span> <span class="n">instance</span><span class="o">)</span> <span class="o">{</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">instance</span> <span class="k">instanceof</span> <span class="n">ImmutableValueObject</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">return</span> <span class="o">(</span><span class="n">ImmutableValueObject</span><span class="o">)</span> <span class="n">instance</span><span class="o">;</span>
    <span class="o">}</span>
    <span class="k">return</span> <span class="n">ImmutableValueObject</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
        <span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="n">instance</span><span class="o">)</span>
        <span class="o">.</span><span class="na">build</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Creates a builder for {@link ImmutableValueObject ImmutableValueObject}.</span>
<span class="cm">   * @return A new ImmutableValueObject builder</span>
<span class="cm">   */</span>
  <span class="kd">public</span> <span class="kd">static</span> <span class="n">ImmutableValueObject</span><span class="o">.</span><span class="na">Builder</span> <span class="nf">builder</span><span class="o">()</span> <span class="o">{</span>
    <span class="k">return</span> <span class="k">new</span> <span class="n">ImmutableValueObject</span><span class="o">.</span><span class="na">Builder</span><span class="o">();</span>
  <span class="o">}</span>

  <span class="cm">/**</span>
<span class="cm">   * Builds instances of type {@link ImmutableValueObject ImmutableValueObject}.</span>
<span class="cm">   * Initialize attributes and then invoke the {@link #build()} method to create an</span>
<span class="cm">   * immutable instance.</span>
<span class="cm">   * &lt;p&gt;&lt;em&gt;{@code Builder} is not thread-safe and generally should not be stored in a field or collection,</span>
<span class="cm">   * but instead used immediately to create instances.&lt;/em&gt;</span>
<span class="cm">   */</span>
  <span class="nd">@NotThreadSafe</span>
  <span class="kd">static</span> <span class="kd">final</span> <span class="kd">class</span> <span class="nc">Builder</span> <span class="o">{</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">INIT_BIT_ID</span> <span class="o">=</span> <span class="mh">0x1L</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">INIT_BIT_NAME</span> <span class="o">=</span> <span class="mh">0x2L</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kd">static</span> <span class="kd">final</span> <span class="kt">long</span> <span class="n">INIT_BIT_DATA</span> <span class="o">=</span> <span class="mh">0x4L</span><span class="o">;</span>
    <span class="kd">private</span> <span class="kt">long</span> <span class="n">initBits</span> <span class="o">=</span> <span class="mh">0x7</span><span class="o">;</span>

    <span class="kd">private</span> <span class="kt">long</span> <span class="n">id</span><span class="o">;</span>
    <span class="kd">private</span> <span class="nd">@Nullable</span> <span class="n">String</span> <span class="n">name</span><span class="o">;</span>
    <span class="kd">private</span> <span class="n">ImmutableList</span><span class="o">.</span><span class="na">Builder</span><span class="o">&lt;</span><span class="n">Number</span><span class="o">&gt;</span> <span class="n">numbersBuilder</span> <span class="o">=</span> <span class="n">ImmutableList</span><span class="o">.</span><span class="na">builder</span><span class="o">();</span>
    <span class="kd">private</span> <span class="n">Optional</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">comment</span> <span class="o">=</span> <span class="n">Optional</span><span class="o">.</span><span class="na">absent</span><span class="o">();</span>
    <span class="kd">private</span> <span class="nd">@Nullable</span> <span class="kt">long</span><span class="o">[]</span> <span class="n">data</span><span class="o">;</span>

    <span class="kd">private</span> <span class="nf">Builder</span><span class="o">()</span> <span class="o">{</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Fill a builder with attribute values from the provided {@code ValueObject} instance.</span>
<span class="cm">     * Regular attribute values will be replaced with those from the given instance.</span>
<span class="cm">     * Absent optional values will not replace present values.</span>
<span class="cm">     * Collection elements and entries will be added, not replaced.</span>
<span class="cm">     * @param instance The instance from which to copy values</span>
<span class="cm">     * @return {@code this} builder for use in a chained invocation</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="n">Builder</span> <span class="nf">from</span><span class="o">(</span><span class="n">ValueObject</span> <span class="n">instance</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">Preconditions</span><span class="o">.</span><span class="na">checkNotNull</span><span class="o">(</span><span class="n">instance</span><span class="o">,</span> <span class="s">&quot;instance&quot;</span><span class="o">);</span>
      <span class="n">id</span><span class="o">(</span><span class="n">instance</span><span class="o">.</span><span class="na">id</span><span class="o">());</span>
      <span class="n">name</span><span class="o">(</span><span class="n">instance</span><span class="o">.</span><span class="na">name</span><span class="o">());</span>
      <span class="n">addAllNumbers</span><span class="o">(</span><span class="n">instance</span><span class="o">.</span><span class="na">numbers</span><span class="o">());</span>
      <span class="n">Optional</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">commentOptional</span> <span class="o">=</span> <span class="n">instance</span><span class="o">.</span><span class="na">comment</span><span class="o">();</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">commentOptional</span><span class="o">.</span><span class="na">isPresent</span><span class="o">())</span> <span class="o">{</span>
        <span class="n">comment</span><span class="o">(</span><span class="n">commentOptional</span><span class="o">);</span>
      <span class="o">}</span>
      <span class="n">data</span><span class="o">(</span><span class="n">instance</span><span class="o">.</span><span class="na">data</span><span class="o">());</span>
      <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Initializes the value for the {@link ValueObject#id() id} attribute.</span>
<span class="cm">     * @param id The value for id</span>
<span class="cm">     * @return {@code this} builder for use in a chained invocation</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="n">Builder</span> <span class="nf">id</span><span class="o">(</span><span class="kt">long</span> <span class="n">id</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">id</span> <span class="o">=</span> <span class="n">id</span><span class="o">;</span>
      <span class="n">initBits</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">INIT_BIT_ID</span><span class="o">;</span>
      <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Initializes the value for the {@link ValueObject#name() name} attribute.</span>
<span class="cm">     * @param name The value for name</span>
<span class="cm">     * @return {@code this} builder for use in a chained invocation</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="n">Builder</span> <span class="nf">name</span><span class="o">(</span><span class="n">String</span> <span class="n">name</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">name</span> <span class="o">=</span> <span class="n">Preconditions</span><span class="o">.</span><span class="na">checkNotNull</span><span class="o">(</span><span class="n">name</span><span class="o">,</span> <span class="s">&quot;name&quot;</span><span class="o">);</span>
      <span class="n">initBits</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">INIT_BIT_NAME</span><span class="o">;</span>
      <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Adds one element to {@link ValueObject#numbers() numbers} list.</span>
<span class="cm">     * @param element A numbers element</span>
<span class="cm">     * @return {@code this} builder for use in a chained invocation</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="n">Builder</span> <span class="nf">addNumbers</span><span class="o">(</span><span class="n">Number</span> <span class="n">element</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">numbersBuilder</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">element</span><span class="o">);</span>
      <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Adds elements to {@link ValueObject#numbers() numbers} list.</span>
<span class="cm">     * @param elements An array of numbers elements</span>
<span class="cm">     * @return {@code this} builder for use in a chained invocation</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="n">Builder</span> <span class="nf">addNumbers</span><span class="o">(</span><span class="n">Number</span><span class="o">...</span> <span class="n">elements</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">numbersBuilder</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="n">elements</span><span class="o">);</span>
      <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Sets or replaces all elements for {@link ValueObject#numbers() numbers} list.</span>
<span class="cm">     * @param elements An iterable of numbers elements</span>
<span class="cm">     * @return {@code this} builder for use in a chained invocation</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="n">Builder</span> <span class="nf">numbers</span><span class="o">(</span><span class="n">Iterable</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">Number</span><span class="o">&gt;</span> <span class="n">elements</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">numbersBuilder</span> <span class="o">=</span> <span class="n">ImmutableList</span><span class="o">.</span><span class="na">builder</span><span class="o">();</span>
      <span class="k">return</span> <span class="n">addAllNumbers</span><span class="o">(</span><span class="n">elements</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Adds elements to {@link ValueObject#numbers() numbers} list.</span>
<span class="cm">     * @param elements An iterable of numbers elements</span>
<span class="cm">     * @return {@code this} builder for use in a chained invocation</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="n">Builder</span> <span class="nf">addAllNumbers</span><span class="o">(</span><span class="n">Iterable</span><span class="o">&lt;?</span> <span class="kd">extends</span> <span class="n">Number</span><span class="o">&gt;</span> <span class="n">elements</span><span class="o">)</span> <span class="o">{</span>
      <span class="n">numbersBuilder</span><span class="o">.</span><span class="na">addAll</span><span class="o">(</span><span class="n">elements</span><span class="o">);</span>
      <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Initializes the optional value {@link ValueObject#comment() comment} to comment.</span>
<span class="cm">     * @param comment The value for comment</span>
<span class="cm">     * @return {@code this} builder for chained invocation</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="n">Builder</span> <span class="nf">comment</span><span class="o">(</span><span class="n">String</span> <span class="n">comment</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">comment</span> <span class="o">=</span> <span class="n">Optional</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="n">comment</span><span class="o">);</span>
      <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Initializes the optional value {@link ValueObject#comment() comment} to comment.</span>
<span class="cm">     * @param comment The value for comment</span>
<span class="cm">     * @return {@code this} builder for use in a chained invocation</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="n">Builder</span> <span class="nf">comment</span><span class="o">(</span><span class="n">Optional</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">comment</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">comment</span> <span class="o">=</span> <span class="n">Preconditions</span><span class="o">.</span><span class="na">checkNotNull</span><span class="o">(</span><span class="n">comment</span><span class="o">,</span> <span class="s">&quot;comment&quot;</span><span class="o">);</span>
      <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Initializes the value for the {@link ValueObject#data() data} attribute.</span>
<span class="cm">     * @param elements The elements for data</span>
<span class="cm">     * @return {@code this} builder for use in a chained invocation</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="kd">final</span> <span class="n">Builder</span> <span class="nf">data</span><span class="o">(</span><span class="kt">long</span><span class="o">...</span> <span class="n">elements</span><span class="o">)</span> <span class="o">{</span>
      <span class="k">this</span><span class="o">.</span><span class="na">data</span> <span class="o">=</span> <span class="n">elements</span><span class="o">.</span><span class="na">clone</span><span class="o">();</span>
      <span class="n">initBits</span> <span class="o">&amp;=</span> <span class="o">~</span><span class="n">INIT_BIT_DATA</span><span class="o">;</span>
      <span class="k">return</span> <span class="k">this</span><span class="o">;</span>
    <span class="o">}</span>

    <span class="cm">/**</span>
<span class="cm">     * Builds a new {@link ImmutableValueObject ImmutableValueObject}.</span>
<span class="cm">     * @return An immutable instance of ValueObject</span>
<span class="cm">     * @throws java.lang.IllegalStateException if any required attributes are missing</span>
<span class="cm">     */</span>
    <span class="kd">public</span> <span class="n">ImmutableValueObject</span> <span class="nf">build</span><span class="o">()</span> <span class="kd">throws</span> <span class="n">IllegalStateException</span> <span class="o">{</span>
      <span class="k">if</span> <span class="o">(</span><span class="n">initBits</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="o">{</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="n">IllegalStateException</span><span class="o">(</span><span class="n">formatRequiredAttributesMessage</span><span class="o">());</span>
      <span class="o">}</span>
      <span class="k">return</span> <span class="k">new</span> <span class="n">ImmutableValueObject</span><span class="o">(</span><span class="n">id</span><span class="o">,</span> <span class="n">name</span><span class="o">,</span> <span class="n">numbersBuilder</span><span class="o">.</span><span class="na">build</span><span class="o">(),</span> <span class="n">comment</span><span class="o">,</span> <span class="n">data</span><span class="o">);</span>
    <span class="o">}</span>

    <span class="kd">private</span> <span class="n">String</span> <span class="nf">formatRequiredAttributesMessage</span><span class="o">()</span> <span class="o">{</span>
      <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">attributes</span> <span class="o">=</span> <span class="n">Lists</span><span class="o">.</span><span class="na">newArrayList</span><span class="o">();</span>
      <span class="k">if</span> <span class="o">((</span><span class="n">initBits</span> <span class="o">&amp;</span> <span class="n">INIT_BIT_ID</span><span class="o">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="n">attributes</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;id&quot;</span><span class="o">);</span>
      <span class="k">if</span> <span class="o">((</span><span class="n">initBits</span> <span class="o">&amp;</span> <span class="n">INIT_BIT_NAME</span><span class="o">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="n">attributes</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;name&quot;</span><span class="o">);</span>
      <span class="k">if</span> <span class="o">((</span><span class="n">initBits</span> <span class="o">&amp;</span> <span class="n">INIT_BIT_DATA</span><span class="o">)</span> <span class="o">!=</span> <span class="mi">0</span><span class="o">)</span> <span class="n">attributes</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;data&quot;</span><span class="o">);</span>
      <span class="k">return</span> <span class="s">&quot;Cannot build ValueObject, some of required attributes are not set &quot;</span> <span class="o">+</span> <span class="n">attributes</span><span class="o">;</span>
    <span class="o">}</span>
  <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>
</section>
<footer class="jumbotron">
  <div class="container">
    <h2>Guides</h2>

<ul>
<li><a href="/getstarted.html">Get started!</a></li>
<li><a href="/intro.html">Inception</a></li>
<li><a href="/immutable.html">Immutable objects</a></li>
<li><a href="/factory.html">Factory builders</a></li>
<li><a href="/functional.html">Functions and Predicates (for Java 7)</a></li>
<li><a href="/style.html">Style customization</a></li>
<li><a href="/json.html">JSON serialization</a></li>
<li><a href="/criteria.html">Criteria</a></li>
<li><a href="/mongo.html">MongoDB repositories</a></li>
<li><a href="/encoding.html">Encoding: Customizing attributes and builders (experimental)</a></li>
<li><a href="/apt.html">Using annotation processor in IDE</a></li>
</ul>

<h2>Get involved</h2>

<ul>
<li>Clone source repository, contribute bug reports and fixes on <a href="https://github.com/immutables/immutables">GitHub immutables/immutables</a></li>
<li>Issue reports, questions and feedback is welcome on issue tracker <a href="https://github.com/immutables/immutables/issues">GitHub immutables/immutables/issues</a></li>
<li>News and announcements on twitter <a href="https://twitter.com/ImmutablesOrg">@ImmutablesOrg</a></li>
</ul>

<p><a href="/license.html">Apache License 2.0</a></p>

    <!--<div><h2>Posts</h2>
      <ul>
        
      </ul>
    </div>-->
  </div>
</footer>
<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
<script defer src="/gfx/jquery.toc.min.js"></script>
<script>
$(function() {
  $('#toc').toc({
    container: '.documentation',
    selectors: 'h1,h2,h3,h4',
    anchorName: function(i, heading, prefix) {
      heading = $(heading).text();
      if (heading.trim) heading = heading.trim();
      return heading.toLowerCase().replace(/ /g, '-').replace(/[^a-z^\-]+/g, '');
    },
  })
})
</script>
</body>
</html>
